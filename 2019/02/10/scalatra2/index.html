<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="a personal blog"><title>Scalatra in Action 2. Scalatra,嘎嘣脆！ | Not determined yet</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/blog/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"><script src="https://www.googletagmanager.com/gtag/js?id=G-N73FWWZR9G" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-N73FWWZR9G');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><style type="text/css">
.spoiler {
  display: inline-flex;
}
p.spoiler {
  display: flex;
}
.spoiler a {
  pointer-events: none;
}
.spoiler-blur, .spoiler-blur > * {
  transition: text-shadow .5s ease;
}
.spoiler .spoiler-blur, .spoiler .spoiler-blur > * {
  color: rgba(0, 0, 0, 0);
  background-color: rgba(0, 0, 0, 0);
  text-shadow: 0 0 10px grey;
  cursor: pointer;
}
.spoiler .spoiler-blur:hover, .spoiler .spoiler-blur:hover > * {
  text-shadow: 0 0 5px grey;
}
.spoiler-box, .spoiler-box > * {
  transition: color .5s ease,
  background-color .5s ease;
}
.spoiler .spoiler-box, .spoiler .spoiler-box > * {
  color: black;
  background-color: black;
  text-shadow: none;
}</style><meta name="generator" content="Hexo 6.1.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Scalatra in Action 2. Scalatra,嘎嘣脆！</h1><a id="logo" href="/blog/.">Not determined yet</a><p class="description">知其强，守其弱，为天下菜，为天下菜，可以下饭。</p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a><a href="/blog/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-triangle warning"> 本文发表的时间过于久远，其中的信息可能已经有所发展或者不再适用于现阶段</i></div><h1 class="post-title">Scalatra in Action 2. Scalatra,嘎嘣脆！</h1><div class="post-meta">2019-02-10<span> | </span><span class="category"><a href="/blog/categories/%E6%8A%80%E6%9C%AF/">技术</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2.9k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 14</span><span class="post-meta-item-text"> 分钟</span></span></span></div><a class="disqus-comment-count" data-disqus-identifier="2019/02/10/scalatra2/" href="/blog/2019/02/10/scalatra2/#disqus_thread"></a><div class="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本系列文章是在阅读《Scalatray in Action》时的学习记录，会参杂个人见解，欢迎勘误抓虫。</p>

  <span class="spoiler" onclick="this.classList.toggle('spoiler')">
    <span class="spoiler-blur ">标题创意来源于《python网络数据采集》”再端一碗Beautiful Soup”</span>
  </span>



<h2 id="下载模板"><a href="#下载模板" class="headerlink" title="下载模板"></a>下载模板</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">需要先安装giter8</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">g8 scalatra/scalatra-sbt.g8</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Starting sbt 0.13.13, Giter8 can be called from sbt’s <span class="string">&quot;new&quot;</span> <span class="built_in">command</span> as follows:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当然你也可以直接使用sbt new来创建</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"> sbt new scalatra/scalatra-sbt.g8</span></span><br><span class="line">...</span><br><span class="line">organization [com.example]: </span><br><span class="line">name [My Scalatra Web App]: </span><br><span class="line">version [0.1.0-SNAPSHOT]: </span><br><span class="line">servlet_name [MyScalatraServlet]: </span><br><span class="line">package [com.example.app]: </span><br><span class="line">scala_version [2.12.6]: </span><br><span class="line">sbt_version [1.2.1]: </span><br><span class="line">scalatra_version [2.6.4]:  </span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>这里会提示输入一些参数，直接一路回车就好了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">目录结构如下</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tree</span></span><br><span class="line">.</span><br><span class="line">├── README.md</span><br><span class="line">├── build.sbt</span><br><span class="line">├── project</span><br><span class="line">│   ├── build.properties</span><br><span class="line">│   └── plugins.sbt</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   ├── resources</span><br><span class="line">    │   │   └── logback.xml</span><br><span class="line">    │   ├── scala</span><br><span class="line">    │   │   ├── ScalatraBootstrap.scala</span><br><span class="line">    │   │   └── com</span><br><span class="line">    │   │       └── example</span><br><span class="line">    │   │           └── app</span><br><span class="line">    │   │               └── MyScalatraServlet.scala</span><br><span class="line">    │   ├── twirl</span><br><span class="line">    │   │   ├── layouts</span><br><span class="line">    │   │   │   └── default.scala.html</span><br><span class="line">    │   │   └── views</span><br><span class="line">    │   │       └── hello.scala.html</span><br><span class="line">    │   └── webapp</span><br><span class="line">    │       └── WEB-INF</span><br><span class="line">    │           └── web.xml</span><br><span class="line">    └── test</span><br><span class="line">        └── scala</span><br><span class="line">            └── com</span><br><span class="line">                └── example</span><br><span class="line">                    └── app</span><br><span class="line">                        └── MyScalatraServletTests.scala</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>这里可以稍微解释下目录结构</p>
<ul>
<li>build.sbt scala项目的配置文件</li>
<li>project 存放sbt版本信息和sbt插件信息</li>
<li>src 这之后的目录结构参考<a target="_blank" rel="noopener" href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">maven默认目录结构</a></li>
</ul>
<p>我们可以从sbt控制台启动该web程序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sbt</span></span><br><span class="line">sbt:My Scalatra Web App&gt; ~jetty:start</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://counter2015.com/picture/scalatra-1-1.jpg"></p>
<p>这个页面其实就是我们在<a target="_blank" rel="noopener" href="http://counter2015.com/2019/01/04/scalatra1/">Hello world项目</a>中的结果</p>
<h2 id="Scalatra中到底有啥"><a href="#Scalatra中到底有啥" class="headerlink" title="Scalatra中到底有啥"></a>Scalatra中到底有啥</h2><p><strong>Scalatra的核心只是一种路由HTTP请求的方式，以便在服务器上执行代码块</strong></p>
<p>在这之外的所有其他功能都是通过外部工具包来实现的，下面这张图可以展示一个直观的联系。</p>
<p><img src="https://counter2015.com/picture/scalatra-2-1.jpg"></p>
<p><em>▲ 图片来源：scalatra in action</em></p>
<p>通过giter8模板自动生成的scalatra项目会带有</p>
<ul>
<li><code>scalatra-scalatest</code>测试组件</li>
<li><code>logback-classic</code>日志记录组件</li>
<li><code>jetty-webapp</code>服务器</li>
</ul>
<p>其中<code>MyScalatraServlet.scala</code>可以近似地看作为程序入口</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.app</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.scalatra._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyScalatraServlet</span> <span class="keyword">extends</span> <span class="title">ScalatraServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  get(<span class="string">&quot;/&quot;</span>) &#123;</span><br><span class="line">    views.html.hello()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>很简单对吧，不过就是这个<code>views.html.hello</code>有点不太好理解。</p>
<p>我们回到之前的程序的目录结构图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">├── README.md</span><br><span class="line">├── build.sbt</span><br><span class="line">├── project</span><br><span class="line">│   ├── build.properties</span><br><span class="line">│   └── plugins.sbt</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   ├── resources</span><br><span class="line">    │   │   └── logback.xml</span><br><span class="line">    │   ├── scala</span><br><span class="line">    │   │   ├── ScalatraBootstrap.scala</span><br><span class="line">    │   │   └── com</span><br><span class="line">    │   │       └── example</span><br><span class="line">    │   │           └── app</span><br><span class="line">    │   │               └── MyScalatraServlet.scala</span><br><span class="line">    │   ├── twirl</span><br><span class="line">    │   │   ├── layouts</span><br><span class="line">    │   │   │   └── default.scala.html</span><br><span class="line">    │   │   └── views</span><br><span class="line">    │   │       └── hello.scala.html</span><br><span class="line">    │   └── webapp</span><br><span class="line">    │       └── WEB-INF</span><br><span class="line">    │           └── web.xml</span><br><span class="line">    └── test</span><br><span class="line">        └── scala</span><br><span class="line">            └── com</span><br><span class="line">                └── example</span><br><span class="line">                    └── app</span><br><span class="line">                        └── MyScalatraServletTests.scala</span><br></pre></td></tr></table></figure>



<p>这个目录结构其实和典型的<a target="_blank" rel="noopener" href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">maven标准目录结构</a>很像</p>
<p>稍有不同的地方在于</p>
<ul>
<li><code>project/</code>  sbt版本信息，sbt插件</li>
<li><code>twirl/</code> play的web框架模板组件</li>
</ul>
<p>需要简单说明下<code>twirl</code>的语法规则，参考<a target="_blank" rel="noopener" href="https://www.playframework.com/documentation/2.6.x/ScalaTemplates">官方文档</a></p>
<h3 id="In-Twirl"><a href="#In-Twirl" class="headerlink" title="@ In Twirl"></a>@ In Twirl</h3><p><code>@</code>在twirl中作为一个特殊的标识符，标志着动态代码的开始，代码的结尾不需要显示的标识（因为会自动检测）</p>
<p>如：</p>
<p>Hello @customer.name!<br>       ^^^^^^^^^^^^^<br>       Dynamic code</p>
<p>Hello @(customer.firstName + customer.lastName)!<br>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>                    Dynamic Code</p>
<p>Hello @{val name &#x3D; customer.firstName + customer.lastName; name}!<br>       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p>
<p>My email is bob@@example.com</p>
<p><strong>模板参数</strong></p>
<p>模板类似于函数，因此它需要参数，这些参数必须在模板文件的顶部声明：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@(customer: Customer, orders: List[Order])</span><br><span class="line">//You can also use default values for parameters:</span><br><span class="line"></span><br><span class="line">@(title: String = &quot;Home&quot;)</span><br><span class="line">//Or even several parameter groups:</span><br><span class="line"></span><br><span class="line">@(title: String)(body: Html)</span><br></pre></td></tr></table></figure>



<p><strong>循环</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">@for(p &lt;- products) &#123;</span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>@p.name ($@p.price)<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>Note: 由于<del>愚蠢的</del>编辑器，需要手动保证<code>&#123;</code>和<code>for</code>在同一行以确保动态代码能正确生效。</p>
<blockquote>
<p>关键字和动态代码中间也不能有空格，要是写成<code>@for (p &lt;- products)</code>也会报编译错误</p>
</blockquote>
<p>更多例子可以参照上面给出的官方文档的链接。</p>
<p>回到之前的话题：</p>
<p><code>views.html.hello</code>到底是什么东西？</p>
<p>如果你在 IDEA中打开项目（尚未编译运行过）的话，你会发现<code>view</code>会被标红，但是当你从sbt运行时，它就好了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">│   ├── twirl</span><br><span class="line"> │   │   ├── layouts</span><br><span class="line"> │   │   │   └── default.scala.html</span><br><span class="line"> │   │   └── views</span><br><span class="line"> │   │       └── hello.scala.html</span><br></pre></td></tr></table></figure>



<p>这是因为在twirl框架中，<code>views/Application/index.scala.html</code>的模板文件会被编译成拥有<code>apply</code>方法的<code>views.html.Application.index</code>的类，在这个项目中，<code>views/hello.scala.html</code>生成的类<code>view.html.hello</code>就在<code>target/scala-2.12/twirl/main/views/html/hello.template.scala</code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> views.html</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">TwirlFeatureImports</span>._</span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">TwirlHelperImports</span>._</span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">Html</span></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">JavaScript</span></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">Txt</span></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">Xml</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">hello</span> <span class="keyword">extends</span> <span class="title">_root_</span>.<span class="title">play</span>.<span class="title">twirl</span>.<span class="title">api</span>.<span class="title">BaseScalaTemplate</span>[play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>,_root_.play.twirl.api.<span class="type">Format</span>[play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>]](<span class="params">play.twirl.api.<span class="type">HtmlFormat</span></span>) <span class="keyword">with</span> <span class="title">_root_</span>.<span class="title">play</span>.<span class="title">twirl</span>.<span class="title">api</span>.<span class="title">Template0</span>[play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>] </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**/</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply/*1</span>.2<span class="title">*/</span></span>():play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span> = &#123;</span><br><span class="line">    _display_ &#123;</span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">Seq</span>[<span class="type">Any</span>](format.raw<span class="comment">/*1.4*/</span>(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>),_display_(<span class="comment">/*2.2*/</span>layouts<span class="comment">/*2.9*/</span>.html.<span class="keyword">default</span>(<span class="string">&quot;Scalatra: a tiny, Sinatra-like web framework for Scala&quot;</span>, <span class="string">&quot;Welcome to Scalatra&quot;</span>)<span class="comment">/*2.103*/</span>&#123;_display_(<span class="type">Seq</span>[<span class="type">Any</span>](format.raw<span class="comment">/*2.104*/</span>(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  &quot;&quot;&quot;</span>),format.raw<span class="comment">/*3.3*/</span>(<span class="string">&quot;&quot;&quot;&lt;p&gt;Hello, Twirl!&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>)))&#125;))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">render</span></span>(): play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span> = apply()</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>:(() =&gt; play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>) = () =&gt; apply()</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">ref</span></span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">              <span class="comment">/*</span></span><br><span class="line"><span class="comment">                  -- GENERATED --</span></span><br><span class="line"><span class="comment">                  DATE: Wed Feb 13 14:24:12 GMT+08:00 2019</span></span><br><span class="line"><span class="comment">                  SOURCE: D:/IdeaProjects/scalatra-study/tmp/my-scalatra-web-app/src/main/twirl/views/hello.scala.html</span></span><br><span class="line"><span class="comment">                  HASH: 6a5309d0d842c7b54c83aa665c985afefdc12c70</span></span><br><span class="line"><span class="comment">                  MATRIX: 559-&gt;1|655-&gt;3|682-&gt;5|696-&gt;12|799-&gt;106|838-&gt;107|867-&gt;110</span></span><br><span class="line"><span class="comment">                  LINES: 14-&gt;1|19-&gt;1|20-&gt;2|20-&gt;2|20-&gt;2|20-&gt;2|21-&gt;3</span></span><br><span class="line"><span class="comment">                  -- GENERATED --</span></span><br><span class="line"><span class="comment">              */</span></span><br><span class="line">          </span><br></pre></td></tr></table></figure>



<p>可以看到，代码中<code>/*2.9*/</code>位置又调用了<code>layouts.html.default</code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@(title: <span class="type">String</span>, headline: <span class="type">String</span>)(body: <span class="type">Html</span>)</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;<span class="meta">@title</span>&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;<span class="meta">@headline</span>&lt;/h1&gt;</span><br><span class="line">    <span class="meta">@body</span></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>生成的对应类<code>target/scala-2.12/twirl/main/views/html/default.template.scala</code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> layouts.html</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">TwirlFeatureImports</span>._</span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">TwirlHelperImports</span>._</span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">Html</span></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">JavaScript</span></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">Txt</span></span><br><span class="line"><span class="keyword">import</span> _root_.play.twirl.api.<span class="type">Xml</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">default</span> <span class="keyword">extends</span> <span class="title">_root_</span>.<span class="title">play</span>.<span class="title">twirl</span>.<span class="title">api</span>.<span class="title">BaseScalaTemplate</span>[play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>,_root_.play.twirl.api.<span class="type">Format</span>[play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>]](<span class="params">play.twirl.api.<span class="type">HtmlFormat</span></span>) <span class="keyword">with</span> <span class="title">_root_</span>.<span class="title">play</span>.<span class="title">twirl</span>.<span class="title">api</span>.<span class="title">Template3</span>[<span class="type">String</span>,<span class="type">String</span>,<span class="type">Html</span>,play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>] </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**/</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">apply/*1</span>.2<span class="title">*/</span></span>(title: <span class="type">String</span>, headline: <span class="type">String</span>)(body: <span class="type">Html</span>):play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span> = &#123;</span><br><span class="line">    _display_ &#123;</span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">Seq</span>[<span class="type">Any</span>](format.raw<span class="comment">/*1.47*/</span>(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>),format.raw<span class="comment">/*2.1*/</span>(<span class="string">&quot;&quot;&quot;&lt;html&gt;</span></span><br><span class="line"><span class="string">  &lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;&quot;&quot;&quot;</span>),_display_(<span class="comment">/*4.13*/</span>title),format.raw<span class="comment">/*4.18*/</span>(<span class="string">&quot;&quot;&quot;&lt;/title&gt;</span></span><br><span class="line"><span class="string">  &lt;/head&gt;</span></span><br><span class="line"><span class="string">  &lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;h1&gt;&quot;&quot;&quot;</span>),_display_(<span class="comment">/*7.10*/</span>headline),format.raw<span class="comment">/*7.18*/</span>(<span class="string">&quot;&quot;&quot;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span>),_display_(<span class="comment">/*8.6*/</span>body),format.raw<span class="comment">/*8.10*/</span>(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  &quot;&quot;&quot;</span>),format.raw<span class="comment">/*9.3*/</span>(<span class="string">&quot;&quot;&quot;&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;&quot;&quot;&quot;</span>))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">render</span></span>(title:<span class="type">String</span>,headline:<span class="type">String</span>,body:<span class="type">Html</span>): play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span> = apply(title,headline)(body)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">f</span></span>:((<span class="type">String</span>,<span class="type">String</span>) =&gt; (<span class="type">Html</span>) =&gt; play.twirl.api.<span class="type">HtmlFormat</span>.<span class="type">Appendable</span>) = (title,headline) =&gt; (body) =&gt; apply(title,headline)(body)</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">ref</span></span>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="keyword">this</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">              <span class="comment">/*</span></span><br><span class="line"><span class="comment">                  -- GENERATED --</span></span><br><span class="line"><span class="comment">                  DATE: Wed Feb 13 14:24:12 GMT+08:00 2019</span></span><br><span class="line"><span class="comment">                  SOURCE: D:/IdeaProjects/scalatra-study/tmp/my-scalatra-web-app/src/main/twirl/layouts/default.scala.html</span></span><br><span class="line"><span class="comment">                  HASH: ab59b4dddbafceb665de3cb0f7ce9f2c8dc5df51</span></span><br><span class="line"><span class="comment">                  MATRIX: 582-&gt;1|722-&gt;46|749-&gt;47|803-&gt;75|828-&gt;80|891-&gt;117|919-&gt;125|955-&gt;136|979-&gt;140|1008-&gt;143</span></span><br><span class="line"><span class="comment">                  LINES: 14-&gt;1|19-&gt;1|20-&gt;2|22-&gt;4|22-&gt;4|25-&gt;7|25-&gt;7|26-&gt;8|26-&gt;8|27-&gt;9</span></span><br><span class="line"><span class="comment">                  -- GENERATED --</span></span><br><span class="line"><span class="comment">              */</span></span><br><span class="line">          </span><br></pre></td></tr></table></figure>



<p>这个又长又乱的代码就不再仔细看了，<del>有兴趣可以慢慢研究</del></p>
<p>现在我们可以大致的标一下程序运行的过程，可能不太严谨，只是为了有一个直观的认识。</p>
<ol>
<li><code>ScalatraBootstrap</code>初始化，调用<code>MyScalatraServlet</code></li>
<li><code>MyScalatraServlet</code>处理路由请求，对根目录下的请求转发到<code>views.html.hello</code>处理</li>
<li><code>views.html.hello</code>传递两个参数，作为title和headline，同时传入一个行内html代码块</li>
<li><code>default.template.scala</code>生成具体的html代码</li>
</ol>
<p>如此一来，我们解决了第一章的大部分问题（除了启动流程还是有些模糊）</p>
<p>其实上面这一大坨等效于</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.app</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.scalatra._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyScalatraServlet</span> <span class="keyword">extends</span> <span class="title">ScalatraServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  get(<span class="string">&quot;/&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//views.html.hello()</span></span><br><span class="line">    &lt;html&gt;</span><br><span class="line">      &lt;head&gt;</span><br><span class="line">        &lt;title&gt;<span class="type">Scalatra</span>: a tiny, <span class="type">Sinatra</span>-like web framework <span class="keyword">for</span> <span class="type">Scala</span>&lt;/title&gt;</span><br><span class="line">      &lt;/head&gt;</span><br><span class="line">      &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;<span class="type">Welcome</span> to <span class="type">Scalatra</span>&lt;/h1&gt;</span><br><span class="line">        &lt;p&gt;<span class="type">Hello</span>, <span class="type">Twirl</span>!&lt;/p&gt;</span><br><span class="line">      &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


  <span class="spoiler" onclick="this.classList.toggle('spoiler')">
    <span class="spoiler-blur ">可见某些时候框架会<em><strong>帮助</strong></em>我们把问题搞得更复杂</span>
  </span>

<h2 id="再咬上一口scalatra"><a href="#再咬上一口scalatra" class="headerlink" title="再咬上一口scalatra"></a>再咬上一口scalatra</h2><p>上面这种写法虽然更加简单，但是也引入一个问题——我们无法对数据进行抽象，说到底，还是需要定义一个数据结构。</p>
<p>为了简单起见，我们可以直接在<code>MyScalatraServlet.scala</code>中添加代码(为什么加这样的数据类型当然是参照scala in action 偷懒呀)</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Page</span>(<span class="params">slug:<span class="type">String</span>, title:<span class="type">String</span>, summary:<span class="type">String</span>, body: <span class="type">String</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">PageDao</span> </span>&#123;</span><br><span class="line">  <span class="keyword">val</span> page1 = <span class="type">Page</span>(<span class="string">&quot;bacon-ipsum&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Bacon ipsum dolor sit amet hamburger&quot;</span>,</span><br><span class="line">  <span class="string">&quot;&quot;&quot;Shankle pancetta turkey ullamco exercitation laborum ut</span></span><br><span class="line"><span class="string">      officia corned beef voluptate.&quot;&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;&quot;&quot;Fugiat mollit, spare ribs pork belly flank voluptate ground</span></span><br><span class="line"><span class="string">      round do sunt laboris jowl. Meatloaf excepteur hamburger pork</span></span><br><span class="line"><span class="string">      chop fatback drumstick frankfurter pork aliqua.</span></span><br><span class="line"><span class="string">      Pork belly meatball meatloaf labore. Exercitation commodo nisi</span></span><br><span class="line"><span class="string">      shank, beef drumstick duis. Venison eu shankle sunt commodo short</span></span><br><span class="line"><span class="string">      loin dolore chicken prosciutto beef swine elit quis beef ribs.</span></span><br><span class="line"><span class="string">      Short ribs enim shankle ribeye andouille bresaola corned beef</span></span><br><span class="line"><span class="string">      jowl ut beef.Tempor do boudin, pariatur nisi biltong id elit</span></span><br><span class="line"><span class="string">      dolore non sunt proident sed. Boudin consectetur jowl ut dolor</span></span><br><span class="line"><span class="string">      sunt consequat tempor pork chop capicola pastrami mollit short</span></span><br><span class="line"><span class="string">      loin.&quot;&quot;&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> page2 = <span class="type">Page</span>(<span class="string">&quot;veggie-ipsum&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Arugula prairie turnip desert raisin sierra leone&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Veggies sunt bona vobis, proinde vos postulo esse magis napa</span></span><br><span class="line"><span class="string">      cabbage beetroot dandelion radicchio.&quot;&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Brussels sprout mustard salad jícama grape nori chickpea</span></span><br><span class="line"><span class="string">      dulse tatsoi. Maize broccoli rabe collard greens jícama wattle</span></span><br><span class="line"><span class="string">      seed nori garbanzo epazote coriander mustard.&quot;&quot;&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> pages = <span class="type">List</span>(page1, page2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关于<code>case calss</code> 可以参阅<a target="_blank" rel="noopener" href="https://docs.scala-lang.org/tour/case-classes.html">官方文档</a>和<a target="_blank" rel="noopener" href="https://www.scala-exercises.org/scala_tutorial/classes_vs_case_classes">另一篇文档</a></p>
<p><code>object</code>的话目前需要知道它是<strong>单例</strong>就行了</p>
<blockquote>
<p>Note: 实际使用过程中，当然不推荐把数据直接写到代码里，最好是存放到数据库中。</p>
</blockquote>
<p>现在我们已经”存储“了一些页面，现在的问题是如何访问这些页面，还记得之前说的scalatra的核心是什么吗？</p>
<blockquote>
<p>At its core, Scalatra is nothing more than a way of routing HTTP requests in order to exe-<br>cute blocks of code on the server.                                     —《Scalatra in Action》</p>
</blockquote>
<p>继续添加以下代码</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">get(<span class="string">&quot;/pages/:slug&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// Adds a content type on the response</span></span><br><span class="line">    contentType = <span class="string">&quot;text/html&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Calls the find method on your list of pages, and checks whether any page’s slug matches the incoming route parameter</span></span><br><span class="line">    <span class="type">PageDao</span>.pages find (_.slug == params(<span class="string">&quot;slug&quot;</span>)) <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="comment">// If a page with a matching slug is found, displays the page’s title</span></span><br><span class="line">      <span class="keyword">case</span> <span class="type">Some</span>(page) =&gt; page.title</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// If no page with a matching slug is found, stops and displays an erro</span></span><br><span class="line">      <span class="keyword">case</span> <span class="type">None</span> =&gt; halt(<span class="number">404</span>, <span class="string">&quot;not found&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>关于scalatra的路由语法可以参考<a target="_blank" rel="noopener" href="http://scalatra.org//guides/2.6/http/routes.html">官方文档</a></p>
<p>简单来说<a target="_blank" rel="noopener" href="http://localhost:8080/pages/anything-at-all">http://localhost:8080/pages/anything-at-all</a> 会触发这段代码,<code>params(&quot;slug&quot;)</code>的值为anything-at-all</p>
<p>这里发生了很多事情。路由的操作使用find方法scala的<code>List</code>类。在本例中它被用作通配符模式。</p>
<p>pagedao.pages列表中的每个页面对象实例都迭代发送到<code>match</code>函数，如果页的slug与参数（“slug”）匹配，则匹配块将生成那页的标题。如果找不到匹配页，则match块调用halt并返回HTTP 404状态代码。</p>
<p>听起来很复杂吗，不如直接运行看看吧。</p>
<details>
  <summary>完整代码如下: </summary>
  <p>// MyScalatraServlet.scala</p>
  <pre><code> 
package com.example.app
import org.scalatra._
class MyScalatraServlet extends ScalatraServlet &#123;
  get("/pages/:slug") &#123;
    contentType = "text/html"
    PageDao.pages find (_.slug == params("slug")) match &#123;
      case Some(page) => page.title
      case None => halt(404, "not found")
    &#125;
  &#125;
&#125;
case class Page(slug:String, title:String, summary:String, body: String)
object PageDao &#123;
  val page1 = Page("bacon-ipsum",
    "Bacon ipsum dolor sit amet hamburger",
    """Shankle pancetta turkey ullamco exercitation laborum ut
      officia corned beef voluptate.""",
    """Fugiat mollit, spare ribs pork belly flank voluptate ground
      round do sunt laboris jowl. Meatloaf excepteur hamburger pork
      chop fatback drumstick frankfurter pork aliqua.
      Pork belly meatball meatloaf labore. Exercitation commodo nisi
      shank, beef drumstick duis. Venison eu shankle sunt commodo short
      loin dolore chicken prosciutto beef swine elit quis beef ribs.
      Short ribs enim shankle ribeye andouille bresaola corned beef
      jowl ut beef.Tempor do boudin, pariatur nisi biltong id elit
      dolore non sunt proident sed. Boudin consectetur jowl ut dolor
      sunt consequat tempor pork chop capicola pastrami mollit short
      loin.""")
  val page2 = Page("veggie-ipsum",
    "Arugula prairie turnip desert raisin sierra leone",
    """Veggies sunt bona vobis, proinde vos postulo esse magis napa
      cabbage beetroot dandelion radicchio.""",
    """Brussels sprout mustard salad jícama grape nori chickpea
      dulse tatsoi. Maize broccoli rabe collard greens jícama wattle
      seed nori garbanzo epazote coriander mustard.""")
  val pages = List(page1, page2)
&#125;
  </code>  </pre>
</details>


<p>下面是运行结果</p>
<p><img src="https://counter2015.com/picture/scalatra-2-2.jpg"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>我们简单调试了scalatra，但我们的问题也越来越多</p>
<ul>
<li>如何单独部署写好的WEB项目</li>
<li>如何调整布局</li>
<li>Scalatra的各种组件有哪些适用范围</li>
<li>如何测试</li>
</ul>
</div><div class="post-copyright"><script type="text/javascript" src="/blog/js/copyright.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/blog/css/copyright.css"><p><span>版权声明：</span><p>除另有声明外，本博客文章均采用 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"><b>知识共享(Creative Commons) 署名-非商业性使用-相同方式共享 3.0 中国大陆许可协议</b></a> 进行许可。</p></p></div><br><script type="text/javascript" src="/blog/js/share.js?v=1.0.0" async></script><a class="article-share-link" data-url="https://counter2015.github.io/blog/2019/02/10/scalatra2/" data-id="cl1jg9oo80025qjpveebq4qap" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIElEQVR42u3ay27DMAxE0fz/T7tAVy0M2TNDq6jJq1UQO4qOF4T5+HzkdXyvn59X63z/eZ/z1dU+Dy8YMGC8luEea3VVP0r2Xzf7w4ABYwBDCbJZCHYDsX4/DBgwYFwH2XrohAEDBox9ATd7BdQfEAwYMGBUklg9Wa0E6O25OAwYMF7IyBoDf/N5e38DBgwY/55xROs6sLrhOyve/doBBgwYrRnXr3FZlHt2XMMIxDBgwGjNyIYhrotoerk/G9qQHj0MGDBaMCrjFFnyWRm8CDeFAQNGI4a+kf5i54ZjJRDDgAFjJsNNFyuBtVLOM6qGMGDAaMfYl4hWBiaMhgQMGDBaM0qpo5no1pNk6ZwwYMBox3BbiW6q6Zbnwt/CgAFjDGPHwKv7gLKdYcCA0ZuhNwmyqQ298ZClyvZfwoAB4+UM5RB6ANX3yXqRMGDAmMPISmDZoa9/mzUPYMCAMZOhD1tU7snGLJY7w4ABozXDTVOzb559EEs8DBgwxjAqZXo9WFeSXqleCAMGjKaMLKV0C/eV+2/CMQwYMFozng2sejvBPYQb3GHAgNGDcZgrSzizB2E0MmHAgNGa4Qa77Kp7CH0sDAYMGHMY2SCpGxbdMTK9CQoDBow5DD3w6a96ennOTWLtYQsYMGAMY7jhOGtn2mAYMGDAeGggtRK+b0gwYMAYwFBS0x1tg2ykDAYMGNMYbmNAL8lVElq3wQkDBoymjC+Q2UHPrH6nzQAAAABJRU5ErkJggg==">分享</a><div class="tags"><a href="/blog/tags读书笔记"><i class="fa fa-tag">读书笔记</i></a><a href="/blog/tagsScalatra"><i class="fa fa-tag">Scalatra</i></a></div><div class="post-nav"><a class="pre" href="/blog/2019/02/23/puzzle3/">Scala Puzzle 3.Location, Location, Location</a><a class="next" href="/blog/2019/02/01/giter8/">giter8简单介绍</a></div><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/sukkaw/disqusjs/dist/disqusjs.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/sukkaw/disqusjs/dist/disqus.js"></script><script type="text/javascript" id="disqus-count-script">$(function() {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', '//disqus.com/next/config.json', true);
  xhr.timeout = 2500;
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4 && xhr.status === 200) {
      $('.post-meta .post-comments-count').show();
      var s = document.createElement('script');
      s.id = 'dsq-count-scr';
      s.src = 'https://counter2015.disqus.com/count.js';
      s.async = true;
      (document.head || document.body).appendChild(s);
    }
  };
  xhr.ontimeout = function () { xhr.abort(); };
  xhr.send(null);
});
</script><div class="comments" id="disqus_thread"><script type="text/javascript">// Load comments with DisqusJS
function loadComments() {
  window.dsqjs = new DisqusJS({
    shortname: 'counter2015',
    siteName: 'Not determined yet',
    identifier: '2019/02/10/scalatra2/',
    url: 'https://counter2015.github.io/blog/2019/02/10/scalatra2/',
    title: 'Scalatra in Action 2. Scalatra,嘎嘣脆！',
    api: '',
    apikey: '',
    admin: '',
    adminLabel: ''
  });
}
// Lazy load {# Credit: https://github.com/theme-next/hexo-theme-next/blob/master/layout/_third-party/comments/disqus.swig #}
(function () {
  var offsetTop = document.getElementById('disqus_thread').offsetTop - window.innerHeight;
  if (offsetTop <= 0) {
    // Load directly when there's no scrollbar
    window.addEventListener('load', loadComments, false);
  } else {
    var disqusScroll = function () {
      // offsetTop may changes because of manually resizing browser window or lazy loading images
      var offsetTop = document.getElementById('disqus_thread').offsetTop - window.innerHeight;
      var scrollTop = window.scrollY;

      // Pre-load comments a bit? (margin or anything else)
      if (offsetTop - scrollTop < 60) {
        window.removeEventListener('scroll', disqusScroll);
        loadComments();
      }
    };
    window.addEventListener('scroll', disqusScroll);
  }
})();
// Scroll to comments automatically if #comment-xxx anchor specified
window.addEventListener('load', function () {
  // I don't know why, it just works.
  window.setTimeout(function () {
    if (location.hash.indexOf('#comment-') !== -1) {
      document.getElementById('disqus_thread').scrollIntoView(true);
    }
  }, 100);
}, false);
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://counter2015.github.io/blog"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Bugfix/">Bugfix</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/puzzles/">puzzles</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E5%85%B6%E4%BB%96/">其他</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E6%8A%80%E6%9C%AF/">技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E6%8A%80%E6%9C%AF/%E9%83%A8%E7%BD%B2/">部署</a></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/blog/tags/Flag/" style="font-size: 15px;">Flag</a> <a href="/blog/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/blog/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/blog/tags/%E4%BC%9A%E8%AE%AE/" style="font-size: 15px;">会议</a> <a href="/blog/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/blog/tags/%E5%A4%87%E5%BF%98/" style="font-size: 15px;">备忘</a> <a href="/blog/tags/redis/" style="font-size: 15px;">redis</a> <a href="/blog/tags/giter8/" style="font-size: 15px;">giter8</a> <a href="/blog/tags/%E5%9B%BE%E5%BA%8A/" style="font-size: 15px;">图床</a> <a href="/blog/tags/confluent/" style="font-size: 15px;">confluent</a> <a href="/blog/tags/hbase/" style="font-size: 15px;">hbase</a> <a href="/blog/tags/Github-Actions/" style="font-size: 15px;">Github Actions</a> <a href="/blog/tags/Bing/" style="font-size: 15px;">Bing</a> <a href="/blog/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/blog/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/blog/tags/%E6%9D%82%E8%B0%88/" style="font-size: 15px;">杂谈</a> <a href="/blog/tags/scala/" style="font-size: 15px;">scala</a> <a href="/blog/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 15px;">读书笔记</a> <a href="/blog/tags/PostgreSQL/" style="font-size: 15px;">PostgreSQL</a> <a href="/blog/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/blog/tags/Manjaro/" style="font-size: 15px;">Manjaro</a> <a href="/blog/tags/Scalatra/" style="font-size: 15px;">Scalatra</a> <a href="/blog/tags/zookeeper/" style="font-size: 15px;">zookeeper</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2020/05/10/github-action/">Github Actions 实战——下载每日Bing图片</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/04/19/scalatra9/">Scalatra in Action 9. 配置、编译和部署</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/01/21/manjaro/">Manjaro 安装配置</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/01/02/2019-end/">年终碎碎念和来年Flag</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/12/16/linux-io-scheduler/">Linux I/O调度器备忘</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/11/06/scalatra8/">Scalatra in Action 8. 测试工程师要了杯啤酒</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/08/26/scalatra7/">Scalatra in Action 7. 服务端模板</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/08/22/postgresql/">PostgreSQL 快速使用指南</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/06/30/scalatra6/">Scalatra in Action 6. 处理文件</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/04/29/bug2/">github pages微博图床图片无法显示</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//counter2015.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://wiki.hushhw.cn" title="hushhw's blog 身经百战见得多了" target="_blank">hushhw's blog 身经百战见得多了</a><ul></ul><a href="https://blog.iseki.space" title="isekiのNote" target="_blank">isekiのNote</a><ul></ul><a href="https://razertory.github.io" title="Razetory的技术博客" target="_blank">Razetory的技术博客</a><ul></ul><a href="https://blog.ajin.cloud" title="ajin的博客" target="_blank">ajin的博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/blog/." rel="nofollow">Not determined yet.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/blog/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/blog/css/copycode.css"><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=1.0.0"></script></div></body></html>